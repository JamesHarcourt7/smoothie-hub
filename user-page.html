<html>
    <head>
        <link rel="stylesheet" href="styles.css">
        <title>Profile</title>
    </head>
    <header>
        <h1>
            Profile
            <span><button class=optionshite onclick="goToHome()">Home</button></span>
            <script>
                function goToHome() {
                    window.location.href = "/home.html"
                }
            </script>
        </h1>
    </header>
    <body>
        <div class="flex-container">
            <img src="" id=profile-picture>
            <div id="fuckmeintheassits2am">
            <h1 id=profile-header></h1>
            <h3 id=profile-subheader>Bio:</h3>
            <p id=profile-bio></p>
            <form action="UpdateBio/" method="post" enctype="multipart/form-data">
                <label id=pfpchange-label>Change profile picture: </label><input id=pfpchange-submit type="file" name="changePFP"><br><br>
                <input id="usernameBox" name="username", hidden=true>
                <input type="text" id="new-bio" name="newBio" value="" placeholder="Enter your bio..."><br>
                <input id=save-changes class=optionshite type="submit" value="Save Changes" onsubmit="goBackToHowItWasBeforePlease()"> 
                <button id=cancel-changes class=optionshite type="button" onclick="cancelthatshizzle()">Cancel</button>
                <script src="/hiddenUsernameBox.js"></script>
            </form>
            <button id=edit-profile class=optionshite onclick="makeSomeChanges()">Edit Profile</button>

            <script>
                function makeSomeChanges() {
                    // https://www.youtube.com/watch?v=dQw4w9WgXcQ
                    document.getElementById("profile-subheader").style.display = "none";
                    document.getElementById("profile-bio").style.display = "none";
                    document.getElementById("edit-profile").style.display = "none";
                    document.getElementById("pfpchange-label").style.display = "block";
                    document.getElementById("pfpchange-submit").style.display = "inline";
                    document.getElementById("new-bio").style.display = "block";
                    document.getElementById("save-changes").style.display = "inline";
                    document.getElementById("cancel-changes").style.display = "inline";
                }
                function cancelthatshizzle() {
                    goBackToHowItWasBeforePlease()
                }
                function goBackToHowItWasBeforePlease() {
                    document.getElementById("new-bio").value = "";
                    document.getElementById("pfpchange-submit").value = "";
                    document.getElementById("profile-subheader").style.display = "block";
                    document.getElementById("profile-bio").style.display = "block";
                    document.getElementById("edit-profile").style.display = "block";
                    document.getElementById("pfpchange-label").style.display = "none";
                    document.getElementById("pfpchange-submit").style.display = "none";
                    document.getElementById("new-bio").style.display = "none";
                    document.getElementById("save-changes").style.display = "none";
                    document.getElementById("cancel-changes").style.display = "none";
                }
            </script>
            </div>

            <script>
                var user = window.location.href.split("?")[1]
                document.getElementById("profile-picture").src = "/GetPFP/" + user
                document.getElementById("profile-header").innerHTML = user

                var xhReq = new XMLHttpRequest();
                xhReq.open("GET", "/GetUserBio/" + user, false);
                xhReq.send(null);
                document.getElementById("profile-bio").innerHTML = xhReq.responseText;

            </script>

        </div>
    </body>
</html>