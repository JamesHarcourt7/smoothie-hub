<html>
    
    <head>
            <link rel="stylesheet" href="styles.css">
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
            <title>Smoothie Hub</title>
    </head>
    <body>
        <header>
            <h1>Smoothie Hub
                <span><button class=optionshite onclick="goToLogin()">Login</button></span>
                <span><button class=optionshite onclick="goToProfile()">Profile</button></span>
                <span><button class=optionshite onclick="goToCreatePost()">Create Post</button></span>
                <script>
                    function goToProfile() {
                        window.location.href="/profile.html"
                    }
                    function goToCreatePost() {
                        window.location.href="/createpost.html"
                    }
                    function goToLogin() {
                        window.location.href="/login.html"
                    }
                </script>
            </h1>
            
        </header>
        
        <div class="flex-container">
            <div id = image-holder><img src="" id=main-smoothie-image></div>
            <div id = separator></div>
            <div class=post>
                <h2 id=title-text></h2>
                <p>
                    <img src="" id=pfp>
                    <span id=username-text></span>
                </p>
                
                <div>
                    <span class=stars id=1><i class="fa fa-star"></i></span>
                    <span class=stars id=2><i class="fa fa-star"></i></span>
                    <span class=stars id=3><i class="fa fa-star"></i></span>
                    <span class=stars id=4><i class="fa fa-star"></i></span>
                    <span class=stars id=5><i class="fa fa-star"></i></span>
                </div>

                <h3>Description:</h3>
                <p id = description-text></p>

                <h3>Ingredients:</h3>
                <p id=list></p>

                <button class=optionshite>Like</button>
                <button class=optionshite>Dislike</button>

                <script>
                    function ajax() {
                        var xhReq = new XMLHttpRequest();
                        xhReq.open("GET", "/SuggestNextPost", false);
                        xhReq.send(null);
                        var id = xhReq.responseText;

                        var xhReq = new XMLHttpRequest();
                        xhReq.open("GET", "/GetTitleFromPost/" + id, false);
                        xhReq.send(null);
                        var serverResponse = xhReq.responseText;
                        document.getElementById("title-text").innerHTML = serverResponse;

                        var xhReq = new XMLHttpRequest();
                        xhReq.open("GET", "/GetUserFromPost/" + id, false);
                        xhReq.send(null);
                        var serverResponse = xhReq.responseText;
                        document.getElementById("username-text").innerHTML = serverResponse;

                        var xhReq = new XMLHttpRequest();
                        xhReq.open("GET", "/GetDescFromPost/" + id, false);
                        xhReq.send(null);
                        var serverResponse = xhReq.responseText;
                        document.getElementById("description-text").innerHTML = serverResponse;
                    
                        var xhReq = new XMLHttpRequest();
                        xhReq.open("GET", "/GetIngrFromPost/" + id, false);
                        xhReq.send(null);
                        var serverResponse = xhReq.responseText;
                        document.getElementById("list").innerHTML = serverResponse;

                        document.getElementById("main-smoothie-image").src = "/GetImageFromPost/" + id;
                        document.getElementById("pfp").src = "/GetPFP/testuser";

                        var xhReq = new XMLHttpRequest();
                        xhReq.open("GET", "/GetRatingFromPost/" + id, false);
                        xhReq.send(null);
                        var serverResponse = xhReq.responseText;
                        var rating = serverResponse;
                        for (i=1; i <= rating; i++) {
                            document.getElementById(i).style.cssText = "background-color: gold;"
                        }
                        var r = (rating % 1) * 100
                        document.getElementById(Math.floor(rating + 1)).style.cssText = "background-color: linear-gradient(to right,  gold " + r.toString() + "%, white " + (1 - r).toString() + "%);"

                    }
                    ajax()

                </script>

            </div>
        </div>
                    
    </body>
</html>